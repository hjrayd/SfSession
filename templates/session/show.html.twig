{% extends 'base.html.twig' %}

{% block title %}Details of the session{% endblock %}

{% block body %}

    <h1> Details of the session {{ session }}</h1>
    <h2>Program: </h2> <br>

    Beginning date : {{ session.beginningDate}} <br>
    Ending date : {{ session.endingDate}} <br>
    Number of places : {{ session.numberPlace}} <br>
    Token places : {{takenPlaces}} <br>
    Remaining places {{ remainingPlaces }} <br>

   
    <h3>Modules:</h3> 
        {% for program in session.programs %}
            {% if is_granted('ROLE_ADMIN') %}
                <a href="{{ path('removeProgram_session', {'id': session.id, 'programId': program.id} )}}"> X </a>
            {% endif %}
            <a href={{ path('show_module', {'id':program.module.id} )}}> {{ program.module }} </a> <a href={{ path('show_category', {'id':program.module.category.id} )}}> - {{ program.module.Category }} </a>- {{ program.nbDays }} days <br>
           
    {% endfor %}
    <h2>Trainees registered in this session :</h2> <br>
        {% for trainee in session.trainees %} 
            <li>
                <a href="{{ path('show_trainee', {'id':trainee.id} )}}">{{ trainee }}</a>
                {% if is_granted('ROLE_ADMIN') %}
                <a href="{{ path('removeTrainee_session', {'id': session.id, 'traineeId': trainee.id} )}}"> X </a>
                {% endif %}
            </li>  <br> 
        {% endfor %}

    <h2>Trainees not registered in this session :</h2>
        {% for trainee in notRegistered %}
            <li>
                <a href="{{ path('show_trainee', {'id':trainee.id} )}}">{{ trainee }}</a>
                {% if is_granted('ROLE_ADMIN') %}
                <a href="{{ path('addTrainee_session', {'id': session.id, 'traineeId': trainee.id} )}}"> + </a>
                {% endif %}
                
            </li>
            {% endfor %}
            
            <h2> Modules not programmed in this session : </h2> <br>
            {% for module in notProgrammed %}
           
            <li>
                <a href="{{ path('show_module', {'id':module.id} )}}">{{ module }}</a>
            </li>
             
        {% endfor %}
            {% if is_granted('ROLE_ADMIN') %}
                <h2> Add a module in this session : </h2>
                {{ form_start(form) }}
                {{ form_end(form) }}
            {% endif %}

{% endblock %}
